<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anemia Classification Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
            color: #e0e0e0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        header p {
            color: #b0b0b0;
        }

        .score-board {
            background: linear-gradient(135deg, #2a2a3e 0%, #1f1f2e 100%);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
            border: 1px solid #3a3a4e;
        }

        .score-item {
            text-align: center;
        }

        .score-item .label {
            font-size: 0.9em;
            color: #8a8a9a;
            margin-bottom: 5px;
        }

        .score-item .value {
            font-size: 1.8em;
            font-weight: bold;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            font-size: 1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: #1a1a2e;
        }

        .btn-secondary {
            background: #2a2a3e;
            color: #4facfe;
            border: 2px solid #4facfe;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
        }

        .game-area {
            display: flex;
            gap: 20px;
        }

        .word-bank-container {
            width: 350px;
            background: linear-gradient(135deg, #2a2a3e 0%, #1f1f2e 100%);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.5);
            border: 1px solid #3a3a4e;
            position: sticky;
            top: 20px;
            max-height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
        }

        .word-bank-header {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
        }

        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 80px;
            padding: 8px 12px;
            background: #1a1a2e;
            border: 1px solid #3a3a4e;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            transition: all 0.3s;
            color: #8a8a9a;
        }

        .tab.active {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: #1a1a2e;
            border-color: #4facfe;
        }

        .word-bank-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: #16213e;
            border-radius: 10px;
            min-height: 400px;
            border: 1px solid #2a3a5e;
        }

        .word-item {
            background: linear-gradient(135deg, #2a2a3e 0%, #252535 100%);
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: move;
            border: 2px solid #3a3a4e;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            font-size: 0.95em;
            line-height: 1.4;
            color: #d0d0d0;
        }

        .word-item:hover {
            border-color: #4facfe;
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }

        .word-item.dragging {
            opacity: 0.5;
        }

        .disorders-grid {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
        }

        .disorder-card {
            background: linear-gradient(135deg, #2a2a3e 0%, #1f1f2e 100%);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.5);
            border: 1px solid #3a3a4e;
        }

        .disorder-title {
            font-size: 1.3em;
            font-weight: bold;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #4facfe;
        }

        .drop-zone {
            margin-bottom: 15px;
        }

        .zone-label {
            font-weight: 600;
            color: #4facfe;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .drop-area {
            min-height: 70px;
            border: 2px dashed #3a3a4e;
            border-radius: 8px;
            padding: 10px;
            background: #16213e;
            transition: all 0.3s;
        }

        .drop-area.drag-over {
            background: #1a2942;
            border-color: #4facfe;
            border-style: solid;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.3);
        }

        .drop-area .word-item {
            cursor: move;
            margin-bottom: 5px;
        }

        .drop-area .word-item.correct {
            background: linear-gradient(135deg, #1e4d2b 0%, #1a3a23 100%);
            border-color: #28a745;
            box-shadow: 0 2px 10px rgba(40, 167, 69, 0.3);
        }

        .drop-area .word-item.incorrect {
            background: linear-gradient(135deg, #4d1e1e 0%, #3a1a1a 100%);
            border-color: #dc3545;
            box-shadow: 0 2px 10px rgba(220, 53, 69, 0.3);
        }

        .summary-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .summary-content {
            background: linear-gradient(135deg, #2a2a3e 0%, #1f1f2e 100%);
            padding: 30px;
            border-radius: 15px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 50px rgba(0,0,0,0.7);
            border: 1px solid #3a3a4e;
        }

        .summary-content h2 {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
        }

        .summary-item {
            margin-bottom: 20px;
            padding: 15px;
            background: #16213e;
            border-radius: 8px;
            border: 1px solid #2a3a5e;
        }

        .summary-item h3 {
            color: #4facfe;
            margin-bottom: 10px;
        }

        .summary-item ul {
            list-style-position: inside;
            color: #b0b0b0;
        }

        .summary-item li {
            margin-bottom: 5px;
        }

        .summary-item strong {
            color: #00f2fe;
        }

        @media (max-width: 1024px) {
            .game-area {
                flex-direction: column;
            }

            .word-bank-container {
                width: 100%;
                position: relative;
                max-height: none;
            }

            .disorders-grid {
                grid-template-columns: 1fr;
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a2e;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #4facfe;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #00f2fe;
        }

        .tooltip {
            position: absolute;
            background: #2a2a3e;
            color: #4facfe;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            pointer-events: none;
            z-index: 1000;
            border: 1px solid #4facfe;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ü©∫ Anemia Classification Challenge</h1>
            <p>Drag and drop the characteristics to match each anemia type</p>
            <p style="font-size: 0.85em; color: #8a8a9a; margin-top: 5px;">üí° Drag incorrect answers back to word bank (they'll go to the top)</p>
        </header>

        <div class="score-board">
            <div class="score-item">
                <div class="label">Correct</div>
                <div class="value" id="correct-count">0</div>
            </div>
            <div class="score-item">
                <div class="label">Remaining</div>
                <div class="value" id="remaining-count">50</div>
            </div>
            <div class="score-item">
                <div class="label">Progress</div>
                <div class="value" id="progress-percent">0%</div>
            </div>
        </div>

        <div class="controls">
            <button class="btn-primary" onclick="showSummary()">üìã Show Summary</button>
            <button class="btn-secondary" onclick="showHint()">üí° Hint</button>
            <button class="btn-secondary" onclick="showAllAnswers()">üëÅÔ∏è Show All Answers</button>
            <button class="btn-primary" onclick="resetGame()">üîÑ Reset</button>
        </div>

        <div class="game-area">
            <div class="word-bank-container">
                <div class="word-bank-header">Word Bank</div>
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('clinical')">Clinical</button>
                    <button class="tab" onclick="switchTab('labs')">Labs</button>
                    <button class="tab" onclick="switchTab('pathophys')">Pathophys</button>
                    <button class="tab" onclick="switchTab('treatment')">Treatment</button>
                    <button class="tab" onclick="switchTab('smear')">Smear</button>
                </div>
                <div class="word-bank-content" id="word-bank">
                    <!-- Words will be populated by JavaScript -->
                </div>
            </div>

            <div class="disorders-grid" id="disorders-grid">
                <!-- Disorder cards will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <div class="summary-modal" id="summary-modal" onclick="closeSummary(event)">
        <div class="summary-content" onclick="event.stopPropagation()">
            <h2>üìö Anemia Summary Guide</h2>
            <div id="summary-list"></div>
            <button class="btn-primary" onclick="closeSummary()" style="margin-top: 20px; width: 100%;">Close</button>
        </div>
    </div>

    <script>
        const disorders = {
            'Iron-Deficiency Anemia': {
                clinical: 'Fatigue, koilonychia (spoon nails), pica, heavy menses',
                labs: 'Low ferritin (<15), high TIBC, low transferrin saturation',
                pathophys: 'Chronic blood loss, dietary deficiency, increased demand (pregnancy)',
                treatment: 'Oral iron (ferrous sulfate), treat underlying cause (colonoscopy if needed)',
                smear: 'Microcytic hypochromic RBCs, increased central pallor, anisocytosis'
            },
            'Thalassemia': {
                clinical: 'Asymptomatic or mild anemia, hepatosplenomegaly, frontal bossing',
                labs: 'Low MCV but normal/high RBC count, elevated HbA2/HbF on electrophoresis',
                pathophys: 'Œ±-gene deletion or Œ≤-gene mutation causes globin chain imbalance',
                treatment: 'Chronic transfusions, iron chelation (deferoxamine), splenectomy',
                smear: 'Microcytic hypochromic, target cells, nucleated RBCs'
            },
            'Anemia of Chronic Disease': {
                clinical: 'Fatigue with underlying disease (RA, IBD, cancer, infection)',
                labs: 'Normal/high ferritin, low iron, low TIBC, low/normal transferrin sat',
                pathophys: 'Increased hepcidin traps iron in macrophages and hepatocytes',
                treatment: 'Treat underlying inflammatory disease (no iron needed)',
                smear: 'Normocytic (sometimes microcytic), may be hypochromic'
            },
            'Sideroblastic Anemia': {
                clinical: 'Often asymptomatic, may have iron overload complications',
                labs: 'High ferritin, low TIBC, dimorphic RBCs on CBC',
                pathophys: 'Defect in heme synthesis (ALAS enzyme), caused by alcohol or lead',
                treatment: 'Vitamin B6 supplementation, treat cause, iron chelation if overload',
                smear: 'Pappenheimer bodies, ringed sideroblasts in bone marrow (Prussian blue stain)'
            },
            'Aplastic Anemia': {
                clinical: 'Fatigue, bleeding (petechiae), recurrent infections (pancytopenia)',
                labs: 'Pancytopenia (low WBC, RBC, platelets), low reticulocytes',
                pathophys: 'Loss of hematopoietic stem cells (drugs, viruses, Fanconi anemia)',
                treatment: 'Eltrombopag (TPO agonist), immunosuppression, stem cell transplant',
                smear: 'Normal RBC morphology, bone marrow shows adipose tissue replacing cells'
            },
            'Hereditary Spherocytosis': {
                clinical: 'Intermittent jaundice, splenomegaly, gallstones, family history',
                labs: 'Increased MCHC (only anemia with this), positive osmotic fragility test',
                pathophys: 'Spectrin/ankyrin defect causes membrane loss ‚Üí spherocytes',
                treatment: 'Folic acid supplementation, splenectomy for severe cases',
                smear: 'Spherocytes (no central pallor), increased RDW, EMA binding confirms'
            },
            'Sickle Cell Disease': {
                clinical: 'Vaso-occlusive pain crises, acute chest syndrome, priapism, dactylitis',
                labs: 'Normocytic anemia, HbS on electrophoresis, positive sickle solubility test',
                pathophys: 'Point mutation (Glu‚ÜíVal at position 6) causes HbS polymerization when deoxygenated',
                treatment: 'Hydroxyurea (‚ÜëHbF), hydration, analgesia, transfusions, avoid triggers',
                smear: 'Sickle-shaped RBCs, target cells, Howell-Jolly bodies (autosplenism)'
            },
            'G6PD Deficiency': {
                clinical: 'Hemolytic crisis after oxidative stress (sulfa drugs, fava beans, infection)',
                labs: 'Normocytic anemia, low haptoglobin, hemoglobinuria, check G6PD levels after crisis',
                pathophys: 'X-linked deficiency causes oxidative damage (‚ÜìNADPH ‚Üí ‚Üìreduced glutathione)',
                treatment: 'Avoid triggers (sulfa drugs, antimalarials, fava beans, aspirin)',
                smear: 'Heinz bodies (vital stain), bite cells, spherocytes'
            },
            'Warm Autoimmune Hemolytic Anemia': {
                clinical: 'Fatigue, jaundice, splenomegaly, associated with SLE or drugs',
                labs: 'Positive DAT (Coombs), low haptoglobin, high indirect bilirubin',
                pathophys: 'IgG antibodies against RBCs cause extravascular hemolysis in spleen',
                treatment: 'Corticosteroids (prednisone), rituximab (anti-CD20), splenectomy',
                smear: 'Spherocytes (macrophages nibble membrane), increased reticulocytes'
            },
            'Megaloblastic Anemia': {
                clinical: 'Fatigue, glossitis, neurologic symptoms (numbness, gait issues) if B12 deficient',
                labs: 'High MCV (>100, often >115), low reticulocytes, high homocysteine/MMA',
                pathophys: 'B12 or folate deficiency impairs DNA synthesis (nuclear-cytoplasmic asynchrony)',
                treatment: 'B12 (IM if pernicious anemia) or folate supplementation',
                smear: 'Macro-ovalocytes, hypersegmented neutrophils (>5 lobes)'
            }
        };

        let currentTab = 'clinical';
        let correctCount = 0;
        let wordBank = {};

        function initializeGame() {
            // Create word bank by category
            Object.keys(disorders).forEach(disorder => {
                Object.keys(disorders[disorder]).forEach(category => {
                    if (!wordBank[category]) {
                        wordBank[category] = [];
                    }
                    wordBank[category].push({
                        text: disorders[disorder][category],
                        correctDisorder: disorder,
                        category: category,
                        id: `${disorder}-${category}`
                    });
                });
            });

            // Randomize word bank items
            Object.keys(wordBank).forEach(category => {
                wordBank[category] = shuffleArray(wordBank[category]);
            });

            renderWordBank();
            renderDisorders();
            updateScore();
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            renderWordBank();
        }

        function renderWordBank() {
            const container = document.getElementById('word-bank');
            container.innerHTML = '';
            
            if (wordBank[currentTab]) {
                wordBank[currentTab].forEach(item => {
                    const wordDiv = document.createElement('div');
                    wordDiv.className = 'word-item';
                    wordDiv.draggable = true;
                    wordDiv.textContent = item.text;
                    wordDiv.dataset.id = item.id;
                    wordDiv.dataset.category = item.category;
                    wordDiv.dataset.correct = item.correctDisorder;
                    
                    wordDiv.addEventListener('dragstart', handleDragStart);
                    wordDiv.addEventListener('dragend', handleDragEnd);
                    container.appendChild(wordDiv);
                });
            }
        }

        function renderDisorders() {
            const grid = document.getElementById('disorders-grid');
            grid.innerHTML = '';

            Object.keys(disorders).forEach(disorder => {
                const card = document.createElement('div');
                card.className = 'disorder-card';
                card.innerHTML = `
                    <div class="disorder-title">${disorder}</div>
                    ${Object.keys(disorders[disorder]).map(category => `
                        <div class="drop-zone">
                            <div class="zone-label">${capitalizeFirst(category)}</div>
                            <div class="drop-area" 
                                 data-disorder="${disorder}" 
                                 data-category="${category}"
                                 ondrop="handleDrop(event)"
                                 ondragover="handleDragOver(event)"
                                 ondragleave="handleDragLeave(event)">
                            </div>
                        </div>
                    `).join('')}
                `;
                grid.appendChild(card);
            });
        }

        function capitalizeFirst(str) {
            const names = {
                'clinical': 'Clinical',
                'labs': 'Labs',
                'pathophys': 'Pathophysiology',
                'treatment': 'Treatment',
                'smear': 'Smear/Pathology'
            };
            return names[str] || str;
        }

        function handleDragStart(e) {
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', e.target.dataset.id);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');
            
            const id = e.dataTransfer.getData('text/plain');
            const draggedElement = document.querySelector(`[data-id="${id}"]`);
            
            if (!draggedElement) return;

            const dropZone = e.currentTarget;
            
            // Check if dropping into word bank
            if (dropZone.id === 'word-bank') {
                returnToWordBankFromDrag(draggedElement);
                return;
            }

            const disorder = dropZone.dataset.disorder;
            const category = dropZone.dataset.category;
            const correctDisorder = draggedElement.dataset.correct;
            const correctCategory = draggedElement.dataset.category;

            // Remove from word bank or previous location
            if (draggedElement.parentElement.id === 'word-bank') {
                const itemIndex = wordBank[currentTab].findIndex(item => item.id === id);
                if (itemIndex > -1) {
                    wordBank[currentTab].splice(itemIndex, 1);
                }
            } else {
                // Adjust score if moving from another drop zone
                if (draggedElement.classList.contains('correct')) {
                    correctCount--;
                }
                draggedElement.remove();
            }

            // Create new element in drop zone
            const newElement = document.createElement('div');
            newElement.className = 'word-item';
            newElement.draggable = true;
            newElement.textContent = draggedElement.textContent;
            newElement.dataset.id = id;
            newElement.dataset.category = correctCategory;
            newElement.dataset.correct = correctDisorder;
            
            // Check if correct
            if (disorder === correctDisorder && category === correctCategory) {
                newElement.classList.add('correct');
                correctCount++;
            } else {
                newElement.classList.add('incorrect');
            }

            // Add drag functionality to placed items
            newElement.addEventListener('dragstart', handleDragStart);
            newElement.addEventListener('dragend', handleDragEnd);

            dropZone.appendChild(newElement);
            
            renderWordBank();
            updateScore();
        }

        function returnToWordBankFromDrag(element) {
            const id = element.dataset.id;
            const category = element.dataset.category;
            const correct = element.dataset.correct;
            
            // Adjust score if it was correct
            if (element.classList.contains('correct')) {
                correctCount--;
            }
            
            // Add to TOP of word bank using unshift
            wordBank[category].unshift({
                text: element.textContent,
                correctDisorder: correct,
                category: category,
                id: id
            });
            
            element.remove();
            
            // Re-render if we're on that tab
            if (currentTab === category) {
                renderWordBank();
            }
            updateScore();
        }

        function updateScore() {
            const totalItems = Object.values(wordBank).reduce((sum, items) => sum + items.length, 0);
            const placedItems = 50 - totalItems;
            
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('remaining-count').textContent = totalItems;
            document.getElementById('progress-percent').textContent = 
                Math.round((correctCount / 50) * 100) + '%';
        }

        function showHint() {
            // Find first empty or incorrect drop zone
            const dropZones = document.querySelectorAll('.drop-area');
            for (let zone of dropZones) {
                if (zone.children.length === 0 || 
                    (zone.children[0] && zone.children[0].classList.contains('incorrect'))) {
                    const disorder = zone.dataset.disorder;
                    const category = zone.dataset.category;
                    const correctAnswer = disorders[disorder][category];
                    alert(`Hint for ${disorder} - ${capitalizeFirst(category)}:\n\n"${correctAnswer.substring(0, 50)}..."`);
                    return;
                }
            }
            alert('All items are correctly placed! Great job! üéâ');
        }

        function showAllAnswers() {
            if (!confirm('This will show all correct answers. Continue?')) return;

            // Clear all drop zones
            document.querySelectorAll('.drop-area').forEach(zone => {
                zone.innerHTML = '';
            });

            // Reset word bank
            correctCount = 0;
            wordBank = {};
            
            // Place all items correctly
            Object.keys(disorders).forEach(disorder => {
                Object.keys(disorders[disorder]).forEach(category => {
                    const dropZone = document.querySelector(
                        `.drop-area[data-disorder="${disorder}"][data-category="${category}"]`
                    );
                    
                    const element = document.createElement('div');
                    element.className = 'word-item correct';
                    element.draggable = true;
                    element.textContent = disorders[disorder][category];
                    element.dataset.id = `${disorder}-${category}`;
                    element.dataset.category = category;
                    element.dataset.correct = disorder;
                    
                    element.addEventListener('dragstart', handleDragStart);
                    element.addEventListener('dragend', handleDragEnd);
                    
                    dropZone.appendChild(element);
                    correctCount++;
                });
            });

            renderWordBank();
            updateScore();
        }

        function resetGame() {
            if (!confirm('Reset the game? This will clear all progress.')) return;
            
            correctCount = 0;
            wordBank = {};
            initializeGame();
        }

        function showSummary() {
            const summaryList = document.getElementById('summary-list');
            summaryList.innerHTML = '';

            Object.keys(disorders).forEach(disorder => {
                const item = document.createElement('div');
                item.className = 'summary-item';
                item.innerHTML = `
                    <h3>${disorder}</h3>
                    <ul>
                        <li><strong>Clinical:</strong> ${disorders[disorder].clinical}</li>
                        <li><strong>Labs:</strong> ${disorders[disorder].labs}</li>
                        <li><strong>Pathophysiology:</strong> ${disorders[disorder].pathophys}</li>
                        <li><strong>Treatment:</strong> ${disorders[disorder].treatment}</li>
                        <li><strong>Smear:</strong> ${disorders[disorder].smear}</li>
                    </ul>
                `;
                summaryList.appendChild(item);
            });

            document.getElementById('summary-modal').style.display = 'flex';
        }

        function closeSummary(event) {
            if (!event || event.target.id === 'summary-modal') {
                document.getElementById('summary-modal').style.display = 'none';
            }
        }

        // Make word bank a drop target
        document.addEventListener('DOMContentLoaded', function() {
            const wordBankContent = document.getElementById('word-bank');
            
            wordBankContent.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.style.background = '#1a2942';
            });
            
            wordBankContent.addEventListener('dragleave', function(e) {
                this.style.background = '#16213e';
            });
            
            wordBankContent.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.background = '#16213e';
                
                const id = e.dataTransfer.getData('text/plain');
                const draggedElement = document.querySelector(`[data-id="${id}"]`);
                
                if (draggedElement && draggedElement.parentElement.classList.contains('drop-area')) {
                    returnToWordBankFromDrag(draggedElement);
                }
            });
        });

        // Initialize game on load
        initializeGame();
    </script>
</body>
</html>
